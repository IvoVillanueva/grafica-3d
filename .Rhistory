) %>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>PERMITE</span>"),
columns = vars(fgm_tot, fga_tot, fg_tot)
) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = (""),
team = ("Team "),
fg3m =("3PM"),
fg3a =("3PA"),
fg3_pct = ("3P%"),
fgm_tot = md("FGM<sup>*</sup>"),
fga_tot = md("FGA<sup>*</sup>"),
fg_tot = md("FG%<sup>*</sup>") )%>%
data_color(
columns = vars(fg3m, fg3a),
colors = scales::col_numeric(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fg3_pct),
colors = scales::col_factor(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fgm_tot, fga_tot),
colors = scales::col_numeric(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
data_color(
columns = vars(fg_tot),
colors = scales::col_factor(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
cols_align(
align = "left",
columns = 2
)  %>%
cols_align(
align = "center",
columns = 3
)  %>%
cols_align(
align = "left",
columns = 4
)  %>%
cols_align(
align = "center",
columns = 5:10
)  %>%
text_transform(
locations = cells_body(vars(head, logos)),
fn = function(x) {
web_image(url = x)
}
) %>%
tab_style(
style = list(
cell_borders(
sides = "bottom",
color = "black",
weight = px(2)
)
),
locations = list(
cells_column_labels(
columns = gt::everything()
)
)
)  %>%
tab_style(
style = list(
cell_borders(
sides = "bottom",
color = "black",
weight = px(2)
)
),
locations = list(
cells_row_groups(
columns = gt::everything()
)
)
) %>%
cols_width(2~ px(60)) %>%
opt_row_striping() %>%
tab_style(
style = cell_borders(#esto añade una linea
sides = "left",
color = "black",
weight = px(2)
),
locations =
list(
cells_body(
columns = 8))
) %>%
tab_options(
table.background.color = " #f4f4f4",
column_labels.font.size = 11.5,
column_labels.font.weight = "bold",
row_group.font.weight = NULL,
row_group.background.color = "#f4f4f4",
table.font.size = 9,
heading.title.font.size = 18,
heading.subtitle.font.size = 10.5,
table.font.names = "Chivo",
data_row.padding = px(2)) %>%
tab_source_note(
source_note = md("<sup>*</sup><i>Promedio de FGM, FGA, FG%, en el area restringida, en la pintura,<br>
media distancia, esquina izquierda, esquina derecha y detras de la linea de tres<i><br>
**Datos por**: <i>https://www.nba.com/stats/players/opponent-shooting/<i><br>
**Grafica**: <i>Ivo Villanueva<i>"))
df_stats_Gt %>% gtsave("df_stats_Gt.html")
df_stats_Gt <- df_stats  %>% select(head, player_name, logos,
team, fg3m, fg3a, fg3_pct,
fgm_tot, fga_tot, fg_tot) %>%
mutate(fg3_pct = percent(fg3_pct, .1),
fg_tot = percent(fg_tot, .1)) %>%
gt() %>%
tab_header(
title = md(" **The Best '3&D'?<br>en la**<br><img src='https://seeklogo.com/images/N/nba-logo-41668C66DB-seeklogo.com.png' style='height:30px;'> "),
subtitle = md(glue::glue("Tiros permitidos por jugadores con mas de 70 intentos de 3 | Mas 20 partidos jugados<br>Hasta {hoy}"))) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = ("Team"),
team = (" "),
fg3m = ("3PM"),
fg3a = ("3PA"),
fg3_pct = ("3P%"),
fgm_tot = ("FGM"),
fga_tot = ("FGA"),
fg_tot = ("FG%") )%>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>REALIZA</span>"),
columns = vars(fg3m, fg3a, fg3_pct)
) %>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>PERMITE</span>"),
columns = vars(fgm_tot, fga_tot, fg_tot)
) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = (""),
team = ("Team "),
fg3m =("3PM"),
fg3a =("3PA"),
fg3_pct = ("3P%"),
fgm_tot = md("FGM<sup>*</sup>"),
fga_tot = md("FGA<sup>*</sup>"),
fg_tot = md("FG%<sup>*</sup>") )%>%
data_color(
columns = vars(fg3m, fg3a),
colors = scales::col_numeric(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fg3_pct),
colors = scales::col_factor(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fgm_tot, fga_tot),
colors = scales::col_numeric(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
data_color(
columns = vars(fg_tot),
colors = scales::col_factor(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
cols_align(
align = "left",
columns = 2
)  %>%
cols_align(
align = "center",
columns = 3
)  %>%
cols_align(
align = "left",
columns = 4
)  %>%
cols_align(
align = "center",
columns = 5:10
)  %>%
text_transform(
locations = cells_body(vars(head, logos)),
fn = function(x) {
web_image(url = x)
}
) %>%
tab_style(
style = list(
cell_borders(
sides = "bottom",
color = "black",
weight = px(2)
)
),
locations = list(
cells_column_labels(
columns = gt::everything()
)
)
) %>%
cols_width(2~ px(60)) %>%
opt_row_striping() %>%
tab_style(
style = cell_borders(#esto añade una linea
sides = "left",
color = "black",
weight = px(2)
),
locations =
list(
cells_body(
columns = 8)))%>%
tab_style(
style = cell_borders(
sides = "top",
color = "black",
weight = px(2)
),
locations = cells_body(
columns = everything())
) %>%
tab_options(
table.background.color = " #f4f4f4",
column_labels.font.size = 11.5,
column_labels.font.weight = "bold",
row_group.font.weight = NULL,
row_group.background.color = "#f4f4f4",
table.font.size = 9,
heading.title.font.size = 18,
heading.subtitle.font.size = 10.5,
table.font.names = "Chivo",
data_row.padding = px(2)) %>%
tab_source_note(
source_note = md("<sup>*</sup><i>Promedio de FGM, FGA, FG%, en el area restringida, en la pintura,<br>
media distancia, esquina izquierda, esquina derecha y detras de la linea de tres<i><br>
**Datos por**: <i>https://www.nba.com/stats/players/opponent-shooting/<i><br>
**Grafica**: <i>Ivo Villanueva<i>"))
df_stats_Gt %>% gtsave("df_stats_Gt.html")
df_stats_Gt <- df_stats  %>% select(head, player_name, logos,
team, fg3m, fg3a, fg3_pct,
fgm_tot, fga_tot, fg_tot) %>%
mutate(fg3_pct = percent(fg3_pct, .1),
fg_tot = percent(fg_tot, .1)) %>%
gt() %>%
tab_header(
title = md(" **The Best '3&D'?<br>en la**<br><img src='https://seeklogo.com/images/N/nba-logo-41668C66DB-seeklogo.com.png' style='height:30px;'> "),
subtitle = md(glue::glue("Tiros permitidos por jugadores con mas de 70 intentos de 3 | Mas 20 partidos jugados<br>Hasta {hoy}"))) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = ("Team"),
team = (" "),
fg3m = ("3PM"),
fg3a = ("3PA"),
fg3_pct = ("3P%"),
fgm_tot = ("FGM"),
fga_tot = ("FGA"),
fg_tot = ("FG%") )%>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>REALIZA</span>"),
columns = vars(fg3m, fg3a, fg3_pct)
) %>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>PERMITE</span>"),
columns = vars(fgm_tot, fga_tot, fg_tot)
) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = (""),
team = ("Team "),
fg3m =("3PM"),
fg3a =("3PA"),
fg3_pct = ("3P%"),
fgm_tot = md("FGM<sup>*</sup>"),
fga_tot = md("FGA<sup>*</sup>"),
fg_tot = md("FG%<sup>*</sup>") )%>%
data_color(
columns = vars(fg3m, fg3a),
colors = scales::col_numeric(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fg3_pct),
colors = scales::col_factor(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fgm_tot, fga_tot),
colors = scales::col_numeric(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
data_color(
columns = vars(fg_tot),
colors = scales::col_factor(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
cols_align(
align = "left",
columns = 2
)  %>%
cols_align(
align = "center",
columns = 3
)  %>%
cols_align(
align = "left",
columns = 4
)  %>%
cols_align(
align = "center",
columns = 5:10
)  %>%
text_transform(
locations = cells_body(vars(head, logos)),
fn = function(x) {
web_image(url = x)
}
) %>%
tab_style(
style = list(
cell_borders(
sides = "bottom",
color = "black",
weight = px(2)
)
),
locations = list(
cells_column_labels(
columns = gt::everything()
)
)
) %>%
cols_width(2~ px(60)) %>%
opt_row_striping() %>%
tab_style(
style = cell_borders(#esto añade una linea
sides = "left",
color = "black",
weight = px(2)
),
locations =
list(
cells_body(
columns = 8))
) %>%
tab_options(
table.background.color = " #f4f4f4",
column_labels.font.size = 11.5,
column_labels.font.weight = "bold",
row_group.font.weight = NULL,
row_group.background.color = "#f4f4f4",
table.font.size = 9,
heading.title.font.size = 18,
heading.subtitle.font.size = 10.5,
table.font.names = "Chivo",
column_labels.border.bottom.color = "black",
column_labels.border.bottom.width = px(2),
data_row.padding = px(2)) %>%
tab_source_note(
source_note = md("<sup>*</sup><i>Promedio de FGM, FGA, FG%, en el area restringida, en la pintura,<br>
media distancia, esquina izquierda, esquina derecha y detras de la linea de tres<i><br>
**Datos por**: <i>https://www.nba.com/stats/players/opponent-shooting/<i><br>
**Grafica**: <i>Ivo Villanueva<i>"))
df_stats_Gt %>% gtsave("df_stats_Gt.html")
df_stats_Gt <- df_stats  %>% select(head, player_name, logos,
team, fg3m, fg3a, fg3_pct,
fgm_tot, fga_tot, fg_tot) %>%
mutate(fg3_pct = percent(fg3_pct, .1),
fg_tot = percent(fg_tot, .1)) %>%
gt() %>%
tab_header(
title = md(" **The Best '3&D'?<br>en la**<br><img src='https://seeklogo.com/images/N/nba-logo-41668C66DB-seeklogo.com.png' style='height:30px;'> "),
subtitle = md(glue::glue("Tiros permitidos por jugadores con mas de 70 intentos de 3 | Mas 20 partidos jugados<br>Hasta {hoy}"))) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = ("Team"),
team = (" "),
fg3m = ("3PM"),
fg3a = ("3PA"),
fg3_pct = ("3P%"),
fgm_tot = ("FGM"),
fga_tot = ("FGA"),
fg_tot = ("FG%") )%>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>REALIZA</span>"),
columns = vars(fg3m, fg3a, fg3_pct)
) %>%
tab_spanner(
label =  gt::html("<span style='font-weight:bold;font-size:12px'>PERMITE</span>"),
columns = vars(fgm_tot, fga_tot, fg_tot)
) %>%
cols_label(head = (" "),
player_name = md ("Player"),
logos = (""),
team = ("Team "),
fg3m =("3PM"),
fg3a =("3PA"),
fg3_pct = ("3P%"),
fgm_tot = md("FGM<sup>*</sup>"),
fga_tot = md("FGA<sup>*</sup>"),
fg_tot = md("FG%<sup>*</sup>") )%>%
data_color(
columns = vars(fg3m, fg3a),
colors = scales::col_numeric(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fg3_pct),
colors = scales::col_factor(
palette = c( "#f2fbd2", "#c9ecb4", "#93d3ab", "#35b0ab"),
domain = NULL
) )%>%
data_color(
columns = vars(fgm_tot, fga_tot),
colors = scales::col_numeric(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
data_color(
columns = vars(fg_tot),
colors = scales::col_factor(
palette = c("#FFD700","#FFA500", "#FF8C00","#FF4500"),
domain = NULL
) )%>%
cols_align(
align = "left",
columns = 2
)  %>%
cols_align(
align = "center",
columns = 3
)  %>%
cols_align(
align = "left",
columns = 4
)  %>%
cols_align(
align = "center",
columns = 5:10
)  %>%
text_transform(
locations = cells_body(vars(head, logos)),
fn = function(x) {
web_image(url = x)
}
) %>%
tab_style(
style = list(
cell_borders(
sides = "bottom",
color = "black",
weight = px(2)
)
),
locations = list(
cells_column_labels(
columns = gt::everything()
)
)
) %>%
cols_width(2~ px(60)) %>%
opt_row_striping() %>%
tab_style(
style = cell_borders(#esto añade una linea
sides = "left",
color = "black",
weight = px(2)
),
locations =
list(
cells_body(
columns = 8))
) %>%
tab_options(
table.background.color = " #f4f4f4",
column_labels.font.size = 11.5,
column_labels.font.weight = "bold",
row_group.font.weight = NULL,
row_group.background.color = "#f4f4f4",
table.font.size = 9,
heading.title.font.size = 18,
heading.subtitle.font.size = 10.5,
table.font.names = "Chivo",
table_body.border.bottom.width = px(2),
table_body.border.bottom.color = "black",
data_row.padding = px(2)) %>%
tab_source_note(
source_note = md("<sup>*</sup><i>Promedio de FGM, FGA, FG%, en el area restringida, en la pintura,<br>
media distancia, esquina izquierda, esquina derecha y detras de la linea de tres<i><br>
**Datos por**: <i>https://www.nba.com/stats/players/opponent-shooting/<i><br>
**Grafica**: <i>Ivo Villanueva<i>"))
df_stats_Gt %>% gtsave("df_stats_Gt.html")
